---
import MobileMenu from "@/components/landing/MobileMenu";
import ThemeToggle from "@/components/landing/ThemeToggle";
import { getCtaButtonClasses } from "@/components/landing/cta";
import type { HeaderContent, ThemePreference } from "@/types/ui/landing";

interface Props {
  header: HeaderContent;
  themePreference?: ThemePreference;
}

const { header, themePreference = "light" }: Props = Astro.props;
---

<header
  class="sticky top-0 z-40 w-full border-b border-border/80 bg-background/90 backdrop-blur supports-[backdrop-filter]:bg-background/70"
  role="banner"
>
  <div class="container flex h-20 items-center justify-between gap-6">
    <a
      href="/"
      class="flex items-center gap-2 text-base font-semibold text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
      aria-label={header.productName}
    >
      <span class="text-lg font-semibold sm:text-xl">{header.productName}</span>
      <span class="rounded-full border border-border px-2 py-0.5 text-xs uppercase tracking-wide text-muted-foreground">
        Public
      </span>
    </a>

    <nav class="hidden flex-1 items-center justify-center lg:flex" aria-label="Główna nawigacja">
      <ul class="flex items-center gap-8 text-sm font-medium text-muted-foreground">
        {
          header.links.map((link) => (
            <li>
              <a
                href={link.href}
                aria-label={link.ariaLabel ?? link.label}
                class="transition-colors hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
              >
                {link.label}
              </a>
            </li>
          ))
        }
      </ul>
    </nav>

    <div class="hidden items-center gap-3 lg:flex">
      <ThemeToggle client:idle initialTheme={themePreference} />
      <a
        href={header.secondaryCTA.href}
        aria-label={header.secondaryCTA.ariaLabel ?? header.secondaryCTA.label}
        class={getCtaButtonClasses(header.secondaryCTA.variant, "sm", "min-h-[40px] px-4")}
      >
        {header.secondaryCTA.label}
      </a>
      <a
        href={header.primaryCTA.href}
        aria-label={header.primaryCTA.ariaLabel ?? header.primaryCTA.label}
        class={getCtaButtonClasses(header.primaryCTA.variant, "sm", "min-h-[40px] px-4 font-semibold")}
      >
        {header.primaryCTA.label}
      </a>
    </div>

    <div class="flex flex-1 items-center justify-end lg:hidden">
      <MobileMenu client:idle header={header} themePreference={themePreference} />
    </div>
  </div>
</header>
